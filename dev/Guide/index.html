<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guide · Jot Documentation</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Jot Documentation</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Guide</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Background"><span>Background</span></a></li><li><a class="tocitem" href="#Best-practices"><span>Best practices</span></a></li></ul></li><li><a class="tocitem" href="../Examples/">Examples</a></li><li><a class="tocitem" href="../Managing_lambdas/">Managing Lambdas</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../Functions/">Functions</a></li><li><a class="tocitem" href="../Types/">Types</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/harris-chris/Jot.jl/blob/master/docs/src/Guide.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Guide"><a class="docs-heading-anchor" href="#Guide">Guide</a><a id="Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Guide" title="Permalink"></a></h1><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>From the Julia REPL, type <code>]</code> to enter the Pkg REPL mode, then</p><pre><code class="nohighlight hljs">Pkg.add(&quot;https://github.com/harris-chris/Jot.jl#main&quot;)</code></pre><h2 id="Background"><a class="docs-heading-anchor" href="#Background">Background</a><a id="Background-1"></a><a class="docs-heading-anchor-permalink" href="#Background" title="Permalink"></a></h2><p>Julia is not natively supported language on AWS Lambda. However, a given Julia function can still be used on AWS Lambda by building it into a Docker container, then have that container implement AWS&#39;s <a href="https://docs.aws.amazon.com/lambda/latest/dg/runtimes-api.html">Lambda API</a>. </p><p>Jot uses a four-step process to go from a given block of Julia code, to a working Lambda function. Each step of this process is represented by a different <code>type</code> in Jot. These types are handles for real-life resources, whether on the local filesystem or on AWS:</p><p><code>Responder</code> -&gt; <code>LocalImage</code> -&gt; <code>RemoteImage</code> -&gt; <code>LambdaFunction</code></p><p>A <code>Responder</code> is our chosen code for responding to Lambda Function calls. It can be as simple as a single function in a short Julia script, or it can be a fully-developed package with multiple dependencies.</p><p>A <code>LocalImage</code> is a locally-hosted docker image that has Julia installed, and the <code>Responder</code> added and available. A <code>LocalImage</code> is unique by both - in Docker terminology - its <em>Repository</em> (basic identity) and its <em>Tag</em> (version). Therefore different versions/<em>tags</em> of the same basic image will be represented by different <code>LocalImage</code>s. It also has the <code>Jot.jl</code> package itself installed. <code>Jot.jl</code> hosts the <code>Responder</code>, handling HTTP routing and JSON conversion. Additionally, the <code>LocalImage</code> has <em>AWS RIE</em> installed, a utility provided by AWS that emulates the Lambda run-time environment and so enables local testing of the function.</p><p>The <code>RemoteImage</code> represents the <code>LocalImage</code>, after it has been uploaded to <a href="https://aws.amazon.com/ecr/">AWS ECR</a>. All <code>RemoteImage</code>s must be stored in an ECR Repo. This repo maps to the image <em>Repository</em>. A repo may therefore contain multiple versions/<em>tags</em> for the same <em>Repository</em>; therefore multiple <code>RemoteImage</code>s that share a <em>Repository</em> may be stored in the same ECR Repo.</p><p>A <code>LambdaFunction</code> is the final stage in the process and represents a working Lambda function, powered by a single <code>RemoteImage</code>.</p><h2 id="Best-practices"><a class="docs-heading-anchor" href="#Best-practices">Best practices</a><a id="Best-practices-1"></a><a class="docs-heading-anchor-permalink" href="#Best-practices" title="Permalink"></a></h2><h3 id="Using-PacakgeCompiler.jl"><a class="docs-heading-anchor" href="#Using-PacakgeCompiler.jl">Using PacakgeCompiler.jl</a><a id="Using-PacakgeCompiler.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Using-PacakgeCompiler.jl" title="Permalink"></a></h3><p><a href="https://github.com/JuliaLang/PackageCompiler.jl">PackageCompiler.jl</a> is a Julia package that pre-compiles methods. This can be done during the image creation process, and the <code>create_local_image</code> function has a <code>package_compile</code> option (default <code>false</code>) to indicate whether this should be used. Setting <code>package_compile</code> to <code>true</code> is highly recommended for production use; it eliminates almost all of the usual delay while Julia starts up, and so reduces Lambda Function <a href="https://aws.amazon.com/blogs/compute/operating-lambda-performance-optimization-part-1/">cold start-up</a> times by around 75%, making it competitive with any other language used for AWS Lambda.</p><p><code>PackageCompiler.jl</code> works best when it is given some kind of sample use case; this tells it which methods it should be pre-compiling. By default, this use case involves calling the Responder with an empty string as the argument. However, if you are using a package as a responder, and this package has a test suite, then this will also be used as part of the use case, further improving performance. <code>Jot.jl</code> assumes that the test suite can be found at the standard location of <code>&lt;package base&gt;/test/runtests.jl</code>.</p><h3 id="Working-around-the-one-function-per-container-limit"><a class="docs-heading-anchor" href="#Working-around-the-one-function-per-container-limit">Working around the one-function-per-container limit</a><a id="Working-around-the-one-function-per-container-limit-1"></a><a class="docs-heading-anchor-permalink" href="#Working-around-the-one-function-per-container-limit" title="Permalink"></a></h3><p>The Lambda API limits you to one function per container. In practice, dividing up all your functions into different containers is not practical. Instead, have the responding function expect a Dict, then use one of the fields of the dict to indicate the function that should be called. The responding function can then just forward the other parameters to the appropriate function. </p><p>So instead of creating one responder to do addition:</p><p><code>function add_response_function(a::Number, b::Number) a + b end</code></p><p>and another to do subtraction:</p><p><code>function subtract_response_function(a::Number, b::Number) a - b end</code></p><p>have these as separate images, create a single responding function:</p><pre><code class="nohighlight hljs">function arithmetic_response(f::String, a::Number, b::Number) 
    if f == &quot;add&quot; a + b 
    elseif f == &quot;subtract&quot; a - b
    else error(&quot;Unable to recognize desired function&quot;)
    end
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../Examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.4 on <span class="colophon-date" title="Sunday 25 July 2021 22:18">Sunday 25 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
